@page
@model SilverRazorPage.Pages.SilverPage.IndexModel

@{
    ViewData["Title"] = "Index";
    string role = HttpContext.Session.GetString("role");
    Console.WriteLine(role);
    if (role != "1" && role != "2")
    {
        Response.Redirect("/Error");
    }
}

<!-- Trang chính -->
<div class="container mt-5">
    <h1 class="text-center">Silver Jewelry Collection</h1>

    <!-- Nút tạo mới -->
    <div class="mb-3 text-center">
        <a asp-page="Create" class="btn btn-success">Create New</a>
    </div>

    <!-- Form tìm kiếm -->
    <form method="get" class="mb-4 d-flex justify-content-center">
        <input type="text" name="search" class="form-control me-2" placeholder="Search..." />
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Bảng dữ liệu -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].SilverJewelryName)</th>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].SilverJewelryDescription)</th>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].MetalWeight)</th>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].Price)</th>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].ProductionYear)</th>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].CreatedDate)</th>
                    <th>@Html.DisplayNameFor(model => model.SilverJewelry[0].Category)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.SilverJewelry)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.SilverJewelryName)</td>
                        <td>@Html.DisplayFor(modelItem => item.SilverJewelryDescription)</td>
                        <td>@Html.DisplayFor(modelItem => item.MetalWeight)</td>
                        <td>@Html.DisplayFor(modelItem => item.Price)</td>
                        <td>@Html.DisplayFor(modelItem => item.ProductionYear)</td>
                        <td>@Html.DisplayFor(modelItem => item.CreatedDate)</td>
                        <td>@Html.DisplayFor(modelItem => item.Category.CategoryName)</td>
                        <td>
                            <a asp-page="./Edit" asp-route-id="@item.SilverJewelryId" class="btn btn-warning btn-sm">Edit</a>
                            <a asp-page="./Details" asp-route-id="@item.SilverJewelryId" class="btn btn-info btn-sm">Details</a>
                            <a asp-page="./Delete" asp-route-id="@item.SilverJewelryId" class="btn btn-danger btn-sm">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
